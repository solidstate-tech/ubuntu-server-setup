# Traefik static configuration — reference copy
# The actual config deployed to /opt/traefik/ is generated by scripts/05-traefik.sh
# with values interpolated from .env (ACME_EMAIL, etc.)
#
# This file serves as a template/reference. Edit 05-traefik.sh to change
# what gets deployed to production.

api:
  dashboard: true
  insecure: false

# No global HTTP→HTTPS redirect. This allows IP-only (HTTP) and domain (HTTPS)
# services to coexist. Domain services can use the redirect-to-https@file
# middleware from dynamic/redirect-https.yml for per-router redirects.
entryPoints:
  web:
    address: ":80"
  websecure:
    address: ":443"

certificatesResolvers:
  letsencrypt:
    acme:
      email: "ACME_EMAIL_PLACEHOLDER"
      storage: /acme/acme.json
      httpChallenge:
        entryPoint: web

providers:
  docker:
    endpoint: "unix:///var/run/docker.sock"
    exposedByDefault: false
    network: traefik-public
  file:
    directory: /dynamic
    watch: true

log:
  level: INFO

accessLog: {}
